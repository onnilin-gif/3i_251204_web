<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ì˜í™” ì„¸ ì–¼ê°„ì´ - í•˜ì´ë¼ì´íŠ¸</title>
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.jpg">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/swiper.css">
  <link rel="stylesheet" href="css/animate.css">
  <link rel="stylesheet" href="css/style.css">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Anton&display=swap');

    /* ==========================================================================
       â˜… [í—¤ë” ìŠ¤íƒ€ì¼] index.htmlê³¼ 100% ë™ì¼ (Black Theme) â˜…
       ========================================================================== */
    header {
        width: 100%; height: 100px; 
        background: #000; /* ê²€ì€ìƒ‰ ë°°ê²½ */
        border-bottom: 1px solid rgba(255,255,255,0.1);
        position: relative; /* ì„œë¸Œí˜ì´ì§€ ë°°ì¹˜ */
        z-index: 1000;
    }

    .container { width: 1200px; margin: 0 auto; position: relative; height: 100%; }
    .clearfix::after { content: ''; display: block; clear: both; }

    /* ë¡œê³  */
    h1.logo { 
        position: absolute; left: 0; top: 50%; transform: translateY(-50%); 
        font-size: 32px; font-weight: 900; margin: 0;
    }
    h1.logo a { 
        color: #fff; text-decoration: none; font-family: 'Anton', sans-serif; letter-spacing: 1px;
    }

    /* ë„¤ë¹„ê²Œì´ì…˜ ìœ„ì¹˜ */
    header nav { position: absolute; right: 0; top: 35px; } 
    header nav .gnb > li { float: left; margin-left: 40px; position: relative; }
    
    /* GNB ë§í¬ ìŠ¤íƒ€ì¼ */
    header nav .gnb > li > a { 
        font-size: 18px; font-weight: 700; color: #fff; 
        padding-bottom: 30px; display: block; text-decoration: none;
    }
    header nav .gnb > li:hover > a { color: #ff5e00; }

    /* ë“œë¡­ë‹¤ìš´ ì„œë¸Œë©”ë‰´ */
    header nav .sub {
        position: absolute; top: 65px; left: -20px; width: 400px; 
        background: #fff; padding: 20px;
        border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); 
        display: none; z-index: 100; text-align: left;
    }
    
    /* ëŠê¹€ ë°©ì§€ìš© íˆ¬ëª… ë‹¤ë¦¬ */
    header nav .sub::before {
        content: ''; position: absolute; top: -20px; left: 0; width: 100%; height: 20px;
    }

    header nav .gnb > li:hover .sub { display: block; }
    
    header nav .sub ol { float: left; width: 50%; }
    header nav .sub ol li { margin-bottom: 10px; }
    header nav .sub ol li a { font-size: 15px; color: #666; display: block; padding: 2px 0; }
    header nav .sub ol li a:hover { color: #ff5e00; font-weight: bold; }
    
    header nav .sub .sub_img {
        float: right; width: 45%; height: 150px; 
        background: #ffecd2 url('images/sub_bg_01.jpg') no-repeat center/cover;
        border-radius: 8px; position: relative; overflow: hidden;
    }
    header nav .sub .sub_img p {
        position: absolute; bottom: 15px; left: 15px; color: #fff; 
        font-weight: bold; font-size: 14px; z-index: 1; text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    }

    /* LNB ìˆ¨ê¹€ */
    header nav .lnb { display: none; }

    /* ê²€ì€ìƒ‰ ê°€ë¡œ ë  */
    .black-band {
      width: 100%;
      height: 50px;
      background-color: black;
      margin-top: 50px;
      display: flex; /* Added for centering text */
      justify-content: center; /* Added for centering text */
      align-items: center; /* Added for centering text */
      color: white; /* Added for text color */
      font-size: 14px; /* Added for text size */
      font-weight: bold; /* Added for text weight */
    }

    /* ì™“ì±  ë²„íŠ¼ */
    .watcha-link-container {
        margin-top: 20px;
        margin-bottom: 20px;
    }
    .watcha-btn {
        display: inline-block;
        padding: 12px 24px;
        background-color: #ff0558; /* Watcha's brand color */
        color: white;
        text-decoration: none;
        font-weight: bold;
        border-radius: 5px;
        transition: background-color 0.3s;
    }
    .watcha-btn:hover {
        background-color: #e0044d;
    }

    /* ìš´ëª… ì°¾ê¸° ì„¹ì…˜ */
    .fateful-encounter {
      max-width: 800px;
      margin: 50px auto 0;
      padding: 40px;
      background-color: #f9f9f9;
      border-radius: 8px;
      text-align: center;
    }
    .fateful-encounter h3 {
      font-size: 28px;
      font-weight: 700;
      color: #333;
      margin-bottom: 10px;
    }
    .fateful-encounter .section-desc {
      color: #666;
      margin-bottom: 30px;
    }
    .fateful-encounter .form-group {
      margin-bottom: 20px;
      text-align: left;
    }
    .fateful-encounter label {
      font-weight: 500;
      margin-right: 15px;
    }
    .fateful-encounter .gender-label {
      display: inline-block;
      width: 50px;
    }
    .fateful-encounter input[type="text"],
    .fateful-encounter input[type="tel"] {
      width: calc(100% - 70px);
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .fateful-encounter button {
      padding: 12px 30px;
      border: none;
      background-color: #007bff;
      color: white;
      font-size: 16px;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .fateful-encounter button:hover {
      background-color: #0056b3;
    }
    #destinyResult {
      margin-top: 30px;
      font-size: 20px;
      font-weight: bold;
      color: #ff5e00;
    }
    .event-entry {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid #eee;
    }
    .event-entry h4 {
      font-size: 22px;
      margin-bottom: 20px;
    }
    .form-group-checkbox {
      margin-bottom: 20px;
      text-align: center;
    }
    #phoneEntry button {
      background-color: #28a745;
    }
    #phoneEntry button:hover {
      background-color: #218838;
    }

    /* Modal styles */
    .modal-overlay {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.6);
    }
    .modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 30px;
      border: 1px solid #888;
      width: 80%;
      max-width: 500px;
      border-radius: 10px;
      text-align: center;
      position: relative;
      animation: zoomIn 0.3s;
    }
    .close-btn {
      color: #aaa;
      position: absolute;
      top: 15px;
      right: 25px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close-btn:hover,
    .close-btn:focus {
      color: black;
    }
    .modal-title {
      font-size: 24px;
      margin-bottom: 20px;
      color: #ff5e00;
    }
    #modalResultText {
      font-size: 18px;
    }
    .modal-footer {
      margin-top: 30px;
    }
    .share-section, .recommend-section {
      margin-top: 20px;
    }
    .share-section h4, .recommend-section h4 {
      font-size: 16px;
      margin-bottom: 15px;
    }
    .share-section button, .recommend-section button {
      margin: 0 5px;
      padding: 10px 15px;
      font-size: 14px;
    }
    #copyResultLinkBtn { background-color: #007bff; color: white; }
    #recommendBtn { background-color: #6c757d; color: white; }

    /* Confetti fanfare effect */
    .modal-content.fanfare::before {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background:
        repeating-linear-gradient(45deg, #f00, #f00 2px, transparent 2px, transparent 10px),
        repeating-linear-gradient(-45deg, #ff0, #ff0 2px, transparent 2px, transparent 10px),
        repeating-linear-gradient(135deg, #0f0, #0f0 2px, transparent 2px, transparent 10px),
        repeating-linear-gradient(-135deg, #0ff, #0ff 2px, transparent 2px, transparent 10px);
      background-size: 40px 40px;
      opacity: 0;
      animation: fanfare-burst 0.8s ease-out;
      z-index: -1;
    }

    @keyframes fanfare-burst {
      0% { transform: scale(0); opacity: 1; }
      80% { transform: scale(1.2); opacity: 0.5; }
      100% { transform: scale(1.5); opacity: 0; }
    }
    @keyframes zoomIn {
      from { transform: scale(0.5); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    /* ê¸°ì¡´ ìŠ¤íƒ€ì¼(footer ë“±) ìœ ì§€ */
  </style>

  <script src="js/plugin/jquery-1.12.3.js"></script>
  <script src="js/plugin/jquery.easing.min.js"></script>
  <script src="js/plugin/swiper.min.js"></script>
  <script src="js/plugin/wow.min.js"></script>
  <script src="js/function.js"></script>
  <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
</head>
<body>
  <div id="wrap">
    
    <header>
      <div class="container clearfix">
          <h1 class="logo"><a href="index.html">3 Idiots</a></h1>
          <nav>
            <ul class="gnb clearfix">
              <li><a href="#">ë“±ì¥ì¸ë¬¼</a>
                <div class="sub clearfix">
                  <ol>
                    <li><a href="sub_rancho.html">ë€ì´ˆ</a></li><li><a href="sub_farhan.html">íŒŒë¥´í•œ</a></li><li><a href="sub_raju.html">ë¼ì£¼</a></li><li><a href="sub_virus.html">ë¹„ë£¨ êµìˆ˜</a></li><li><a href="sub_chatur.html">ì°¨íˆ¬ë¥´</a></li><li><a href="sub_pia.html">í”¼ì•„</a></li>
                  </ol>
                  <div class="sub_img"><p>ì „ì„¤ì ì¸ ê³µí•™ ì²œì¬ë“¤ê³¼<br>ê·¸ë“¤ì˜ ìœ ì¾Œí•œ ë°˜ë€</p></div>
                </div>
              </li>
              
              <li><a href="sub_recruit.html">ì¤„ê±°ë¦¬</a></li>
              
              <li><a href="sub_highlight.html">í•˜ì´ë¼ì´íŠ¸</a></li>
              
              <li><a href="#">í›„ê¸°í‰</a>
                <div class="sub clearfix">
                  <ol>
                    <li><a href="sub_netizen_ratings.html">ë„¤í‹°ì¦Œ í‰ì </a></li>
                    <li><a href="sub_real_reviews.html">ì‹¤ê´€ëŒê°í‰</a></li>
                    <li class="last"><a href="sub_critic_reviews.html">í‰ë¡ ê°€í‰</a></li>
                  </ol>
                  <div class="sub_img"><p>ì—¬ëŸ¬ë¶„ì˜ ê°ë™ì„<br>í•¨ê»˜ ë‚˜ëˆ„ì„¸ìš”.</p></div>
                </div>
              </li>
            </ul>
            
            <ul class="lnb clearfix">
              <li>ENGLISH</li><li>SITEMAP</li>
            </ul>
          </nav>
      </div>
    </header>
    <hr>

    <section>
      <h2 class="sr-only">í•˜ì´ë¼ì´íŠ¸ í˜ì´ì§€</h2>
      <div class="sub_banner">
        <p class="wow fadeIn" data-wow-delay="100ms">
          
        </p>
      </div>

      <article class="content wow fadeInUp" data-wow-delay="200ms" style="text-align: center;">
        <h2>í•˜ì´ë¼ì´íŠ¸</h2>
        
        <video controls autoplay muted loop style="width:100%; max-width:800px; margin: 20px 0;">
            <source src="images/3idiot_preview.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <div class="watcha-link-container">
            <a href="https://watcha.com/ko-KR/contents/mOk6rwW" target="_blank" class="watcha-btn">ì™“ì± ì—ì„œ ê°ìƒí•˜ê¸°</a>
        </div>

        <div class="text_content" style="text-align: left; max-width: 800px; margin: 0 auto;">
          <h3>ì˜í™”ì˜ ê°ë™ì„ ë‹¤ì‹œ í•œë²ˆ!</h3>
          <p>
            'ì„¸ ì–¼ê°„ì´'ì˜ ìŠì§€ ëª»í•  ìˆœê°„ë“¤ì„ ëª¨ì•„ë´¤ìŠµë‹ˆë‹¤. ì²œì¬ë“¤ì˜ ìœ ì¾Œí•œ ë°˜ë€ê³¼ ê°€ìŠ´ ë”°ëœ»í•œ ìš°ì •, 
            ê·¸ë¦¬ê³  ìš°ë¦¬ì—ê²Œ ê¹Šì€ ìš¸ë¦¼ì„ ì£¼ì—ˆë˜ ëª…ì¥ë©´ë“¤ì„ ë‹¤ì‹œ ê°ìƒí•´ë³´ì„¸ìš”.
          </p>
        </div>
      </article>

      <section class="fateful-encounter wow fadeInUp" data-wow-delay="300ms">
        <h3>ë‚˜ì™€ ìš´ëª…ì¸ ë“±ì¥ì¸ë¬¼ì€?</h3>
        <p class="section-desc">ê°„ë‹¨í•œ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  <ì„¸ ì–¼ê°„ì´> ë“±ì¥ì¸ë¬¼ ì¤‘ ë‹¹ì‹ ì˜ ìš´ëª…ì˜ ë‹¨ì§ì„ ì°¾ì•„ë³´ì„¸ìš”!</p>
        
        <form id="destinyForm">
          <div class="form-group">
            <label for="name">ì´ë¦„</label>
            <input type="text" id="name" name="name" required>
          </div>
          <div class="form-group">
            <span class="gender-label">ì„±ë³„</span>
            <label><input type="radio" name="gender" value="male" required> ë‚¨ì„±</label>
            <label><input type="radio" name="gender" value="female"> ì—¬ì„±</label>
          </div>
          <div class="form-group">
            <label for="mbti">MBTI</label>
            <input type="text" id="mbti" name="mbti" maxlength="4" required>
          </div>
          
          <button type="button" id="findDestinyBtn">ê²°ê³¼ í™•ì¸í•˜ê¸°</button>
        </form>
        
        <div class="event-entry">
          <h4>ğŸ‰ ìŠ¤í˜ì…œ ì´ë²¤íŠ¸ ìë™ ì‘ëª¨</h4>
          <div class="form-group-checkbox">
            <input type="checkbox" id="agreePrivacy">
            <label for="agreePrivacy">ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
          </div>
          <div id="phoneEntry" style="display: none;">
            <div class="form-group">
              <label for="phone">ì „í™”ë²ˆí˜¸</label>
              <input type="tel" id="phone" name="phone" placeholder="'-' ì—†ì´ ìˆ«ìë§Œ ì…ë ¥">
            </div>
            <button type="button" id="submitEvent">ì‘ëª¨í•˜ê¸°</button>
          </div>
        </div>
      </section>

    </section>
    <div class="black-band">
      <span>2025.12.15 by JieunJung</span>
    </div>
  </div>

  <div id="resultModal" class="modal-overlay">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <div class="modal-body">
        <h3 class="modal-title">ìš´ëª…ì˜ ë‹¨ì§!</h3>
        <img id="characterImage" src="" alt="ìš´ëª…ì˜ ë“±ì¥ì¸ë¬¼" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; margin-bottom: 20px;">
        <p id="modalResultText"></p>
      </div>
      <div class="modal-footer">
        <div class="share-section">
          <h4>ê²°ê³¼ ê³µìœ í•˜ê¸°</h4>
          <button id="copyResultLinkBtn">ê²°ê³¼ ë§í¬ ë³µì‚¬</button>
        </div>
        <div class="recommend-section">
          <button id="recommendBtn">ì´ í…ŒìŠ¤íŠ¸ ì¶”ì²œí•˜ê¸°</button>
        </div>
      </div>
    </div>
  </div>

  <script src="js/initial_function.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Kakao SDK Init (Not used in this version, but kept for potential future use)
      try {
        Kakao.init('d2d25b23443534523542345235423542'); // Placeholder Key
      } catch(e) {
        console.error("Could not initialize Kakao SDK. Please check your key.");
      }

      // DOM Elements
      const findDestinyBtn = document.getElementById('findDestinyBtn');
      const agreePrivacy = document.getElementById('agreePrivacy');
      const phoneEntry = document.getElementById('phoneEntry');
      const submitEventBtn = document.getElementById('submitEvent');
      const destinyForm = document.getElementById('destinyForm');
      
      // Modal elements
      const resultModal = document.getElementById('resultModal');
      const modalContent = resultModal.querySelector('.modal-content');
      const closeModalBtn = resultModal.querySelector('.close-btn');
      const characterImage = document.getElementById('characterImage');
      const modalResultText = document.getElementById('modalResultText');

      // New/Updated Buttons
      const copyResultLinkBtn = document.getElementById('copyResultLinkBtn');
      const recommendBtn = document.getElementById('recommendBtn');

      let lastFatefulCharacter = '';
      let userName = '';

      const characters = {
        'ë€ì´ˆ': { img: 'images/ë€ì´ˆì–¼êµ´.jpg' },
        'íŒŒë¥´í•œ': { img: 'images/íŒŒë¥´í•œ ì–¼êµ´.jpg' },
        'ë¼ì£¼': { img: 'images/ë¼ì£¼ì–¼êµ´.jpg' },
        'ë¹„ë£¨ êµìˆ˜': { img: 'images/ë°ë¹„ë£¨ ì‚¬í•˜ìŠ¤í”„ë¼ë¶€.png' },
        'ì°¨íˆ¬ë¥´': { img: 'images/ì°¨íˆ¬ë¥´ ì–¼êµ´.jpg' },
        'í”¼ì•„': { img: 'images/í”¼ì•„ì–¼êµ´.jpg' }
      };
      const characterNames = Object.keys(characters);

      // --- Main Functions ---

      function showResult(name, character) {
        if (!characters[character]) return; // Exit if character is invalid
        
        lastFatefulCharacter = character;
        userName = name;

        characterImage.src = characters[character].img;
        modalResultText.innerHTML = `<strong>${name}</strong>ë‹˜ì˜ ìš´ëª…ì˜ ë‹¨ì§ì€... <strong>${character}</strong> ì…ë‹ˆë‹¤!`;
        
        resultModal.style.display = 'block';
        modalContent.classList.add('fanfare');
        setTimeout(() => {
          modalContent.classList.remove('fanfare');
        }, 800);
      }

      // --- Event Listeners ---

      findDestinyBtn.addEventListener('click', function() {
        const nameInput = document.getElementById('name').value;
        const gender = document.querySelector('input[name="gender"]:checked');
        const mbti = document.getElementById('mbti').value;

        if (!nameInput || !gender || !mbti) {
          alert('ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          return;
        }
        
        const randomIndex = Math.floor(Math.random() * characterNames.length);
        const fatefulCharacter = characterNames[randomIndex];
        
        showResult(nameInput, fatefulCharacter);
      });
      
      copyResultLinkBtn.addEventListener('click', () => {
        const resultUrl = `${window.location.origin}${window.location.pathname}?name=${encodeURIComponent(userName)}&character=${encodeURIComponent(lastFatefulCharacter)}`;
        navigator.clipboard.writeText(resultUrl).then(() => {
          alert('ê²°ê³¼ ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ì›í•˜ëŠ” ê³³ì— ë¶™ì—¬ë„£ì–´ ê³µìœ í•´ë³´ì„¸ìš”.');
        }).catch(err => {
          alert('ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        });
      });

      recommendBtn.addEventListener('click', () => {
        const baseUrl = window.location.origin + window.location.pathname;
        navigator.clipboard.writeText(baseUrl).then(() => {
          alert('í…ŒìŠ¤íŠ¸ ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì¹œêµ¬ì—ê²Œ ì¶”ì²œí•´ì£¼ì„¸ìš”!');
        }).catch(err => {
          alert('ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        });
      });

      // --- On Page Load ---

      const urlParams = new URLSearchParams(window.location.search);
      const sharedName = urlParams.get('name');
      const sharedCharacter = urlParams.get('character');

      if (sharedName && sharedCharacter) {
        showResult(sharedName, sharedCharacter);
        // Optionally hide the form if showing a shared result
        const formSection = document.querySelector('.fateful-encounter');
        if(formSection) {
            formSection.style.display = 'none';
        }
      }

      // --- Other Event Listeners (Modal, Event Entry) ---
      
      closeModalBtn.addEventListener('click', () => resultModal.style.display = 'none');
      window.addEventListener('click', (event) => {
        if (event.target == resultModal) {
          resultModal.style.display = 'none';
        }
      });

      agreePrivacy.addEventListener('change', function() {
        phoneEntry.style.display = this.checked ? 'block' : 'none';
      });

      submitEventBtn.addEventListener('click', function() {
        const phone = document.getElementById('phone').value;
        if (phone.trim() === '') {
          alert('ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          return;
        }
        alert('ì´ë²¤íŠ¸ì— ì„±ê³µì ìœ¼ë¡œ ì‘ëª¨ë˜ì—ˆìŠµë‹ˆë‹¤!');
        document.getElementById('phone').value = '';
        agreePrivacy.checked = false;
        phoneEntry.style.display = 'none';
      });
    });
  </script>
</body>
</html>
